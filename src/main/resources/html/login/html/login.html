<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录</title>
    <link rel="stylesheet" href="../css/login.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="../js/jquery-3.6.0.js"></script>
	<script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"></script>
</head>
<body>
<div id="app">
    <div class="center">
        <h1>用户登录</h1>
        <form methon="post">
            <div class="txt_field">
                <input v-model="username" type="text" required>
                <span></span>
                <label for="">用户名</label>
            </div>
            <div class="txt_field">
                <input v-model="password" type="password" required>
                <span></span>
                <label for="">密码</label>
            </div>
            <div class="pass">忘记密码？</div>
            <button type="button" @click="login" id="btn">登录</button>
            <div class="zhuce_link">
                <a href="../../register/html/register.html">新用户注册</a>
            </div>
        </form>
    </div>
    <div class="right">
        <form method="POST">
            <div class="qrcode">
                <img src="../img/qrcode.png">
            </div>
            <div class="qr">使用app扫码登录</div>
        </form>
    </div>
</div>
<script>
    var app = new Vue({
        el:"#app",
        data:{
            username:"",
            password:""
        },
        methods:{
            login:function(){
                var that=this;
                var pack= {"username": that.username, "password": that.password};
                // console.log(JSON.stringify(pack));
                axios.post("http://zhuaowei.top:8081/user/login", JSON.stringify(pack), {headers: {'content-type': 'application/json;charset=UTF-8'}})
                .then(function(response){
                    console.log(response);
                    if(response.data.code==200){
                        alert("登录成功");
                        // that.$router.push('/11');
                        window.location.href = 'http://zhuaowei.top:8081/index';
                    }else if(response.data.code==4000){
                        alert(response.data.mes);
                    }else if(response.data.code==4001){
                        alert(response.data.mes);
                    }else if(response.data.code==4003){
                        alert(response.data.mes);
                    }else if(response.data.code==4004){
                        alert(response.data.mes);
                    }else if(response.data.code==4005){
                        alert(response.data.mes);
                    }
                })
            }
        }
    })
</script>
</body>
</html>